# Teen Personality Traits Dashboard

Interactive React dashboard for exploring personality trait means by demographic subgroups.

## Features

- **Group By**: Select demographic variable (Gender, Race, Hispanic/Latino, Age Group)
- **View Toggle**: Switch between individual items and scale scores
- **Interactive Charts**: Horizontal bar charts with hover tooltips
- **Summary Table**: N, Mean, SD for each item by subgroup
- **Responsive Design**: Works on desktop and mobile

## Prerequisites

- Node.js (v18 or later recommended)
- npm (comes with Node.js)
- R analysis must be run first to generate data

## Quick Start

### 1. Generate Data (from R)

First, run the R analysis to generate the JSON data files:

```r
# From the project root directory
source("run_all.R")
```

This will create:
- `dashboard/public/data/summaries.json`
- `dashboard/public/data/metadata.json`

### 2. Install Dependencies

```bash
cd dashboard
npm install
```

### 3. Start Development Server

```bash
npm run dev
```

Open http://localhost:5173 in your browser.

## Build for Production

To create a static build:

```bash
npm run build
```

The output will be in `dashboard/dist/`. You can deploy this folder to any static hosting service (GitHub Pages, Netlify, etc.).

## Project Structure

```
dashboard/
├── index.html          # Entry HTML file
├── package.json        # Dependencies
├── vite.config.js      # Vite configuration
├── public/
│   └── data/           # JSON data files (generated by R)
│       ├── summaries.json
│       └── metadata.json
└── src/
    ├── main.jsx        # React entry point
    ├── App.jsx         # Main app component
    └── styles.css      # Styles
```

## Data Format

### summaries.json

Array of summary statistics with columns:
- `item`: Variable name (e.g., "q001a", "trait_ctt_mean")
- `item_label`: Human-readable label
- `demographic`: Demographic variable name
- `group`: Subgroup value
- `n`: Sample size
- `mean`: Mean score
- `sd`: Standard deviation
- `se`: Standard error
- `ci_lower`, `ci_upper`: 95% confidence interval bounds

### metadata.json

Configuration object:
- `items`: Array of item variable names and labels
- `demographics`: Available demographic variables
- `demographic_groups`: Subgroup levels for each demographic
- `score_types`: Categorization of items vs. scale scores
- `sample_size`: Total N

## Customization

### Adding New Demographics

1. Update `05_export_dashboard_data.R` to compute summaries for the new variable
2. Add the new demographic to the `demographic_groups` list in metadata
3. Re-run the R script and refresh the dashboard

### Changing Colors

Edit the `COLORS` array in `src/App.jsx`:

```javascript
const COLORS = [
  '#2563eb', '#dc2626', '#16a34a', // ... add more colors
]
```

### Modifying Chart Types

The dashboard uses [Recharts](https://recharts.org/). Refer to their documentation for different chart types and configurations.

## Troubleshooting

### "Failed to load data" error

1. Make sure you've run the R analysis first
2. Check that `dashboard/public/data/summaries.json` exists
3. If using `npm run dev`, ensure the dev server is running

### Charts not displaying

1. Check browser console for errors
2. Verify JSON files are valid (no syntax errors)
3. Try clearing browser cache and refreshing

## Contact

CESR Education Data Team
University of Southern California
